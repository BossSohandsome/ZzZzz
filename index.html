<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Interactive Xmas Animation</title>
    <style>
        :root {
            --gold: #d4af37;
            --snow-white: #fdf5e6;
        }
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; background-color: #0a192f;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        canvas { display: block; }

        /* UI Text Layer */
        #ui-layer {
            position: absolute; top: 40%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center; pointer-events: none; width: 100%;
        }
        .name {
            font-size: clamp(3rem, 10vw, 5rem);
            color: var(--snow-white);
            text-shadow: 0 0 20px rgba(255,255,255,0.6);
            font-weight: bold; margin: 0;
        }
        .greeting {
            font-size: clamp(1.2rem, 4vw, 2rem);
            color: var(--gold);
            text-transform: uppercase; letter-spacing: 5px; margin-top: 10px;
        }

        /* Button Container */
        .controls {
            position: absolute; bottom: 30px; left: 50%;
            transform: translateX(-50%);
            display: flex; gap: 10px; flex-wrap: wrap;
            justify-content: center; width: 90%;
        }
        button {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white; padding: 10px 15px;
            border-radius: 20px; cursor: pointer;
            backdrop-filter: blur(5px);
            font-size: 14px; transition: all 0.3s;
            -webkit-tap-highlight-color: transparent;
        }
        button:active { transform: scale(0.9); background: var(--gold); }
        button.active { background: var(--gold); border-color: white; }

        /* Surprise Button */
        .btn-special {
            background: #e74c3c; font-weight: bold; border: none;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
        }
    </style>
</head>
<body>

    <canvas id="xmasCanvas"></canvas>
    
    <div id="ui-layer">
        <div class="name">Stephanie</div>
        <div class="greeting">Merry Christmas</div>
    </div>

    <div class="controls">
        <button id="toggleSnow" class="active">‚ùÑÔ∏è ‡∏´‡∏¥‡∏°‡∏∞</button>
        <button id="toggleStars" class="active">‚ú® ‡∏î‡∏≤‡∏ß</button>
        <button id="jumpAnimals">üêæ ‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î!</button>
        <button id="btnSurprise" class="btn-special">üéÅ ‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏û‡∏£‡∏™‡πå!</button>
    </div>

    <script>
        const canvas = document.getElementById('xmasCanvas');
        const ctx = canvas.getContext('2d');
        let width, height, dpr;
        
        // State
        let showSnow = true;
        let showStars = true;
        let surpriseParticles = [];

        const emojis = {
            santa: "üéÖ", reindeer: "ü¶å", cat: "üê±", penguin: "üêß", 
            sheep: "üêë", chip: "üêπ", capy: "ü¶´", fanta: "ü¶ä"
        };

        let snowflakes = [];
        let stars = [];
        let characters = [];

        function init() {
            dpr = window.devicePixelRatio || 1;
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width * dpr;
            canvas.height = height * dpr;
            ctx.scale(dpr, dpr);

            snowflakes = Array.from({ length: 120 }, () => ({
                x: Math.random() * width, y: Math.random() * height,
                r: Math.random() * 3 + 1, s: Math.random() * 1 + 0.5
            }));

            stars = Array.from({ length: 30 }, () => ({
                x: Math.random() * width, y: Math.random() * (height * 0.5),
                size: Math.random() * 15 + 10
            }));

            const groundList = [emojis.cat, emojis.fanta, emojis.penguin, emojis.sheep, emojis.chip, emojis.capy];
            characters = groundList.map((emoji, i) => ({
                emoji, x: (width / (groundList.length + 1)) * (i + 1),
                y: height - 80, bounce: 0, vY: 0, isJumping: false
            }));
        }

        function drawStar(x, y, size) {
            ctx.save();
            ctx.translate(x, y);
            ctx.fillStyle = "#FFF700";
            ctx.shadowBlur = 15; ctx.shadowColor = "white";
            for (let i = 0; i < 4; i++) {
                ctx.rotate(Math.PI / 2);
                ctx.fillRect(-1, -size/2, 2, size);
            }
            ctx.restore();
        }

        let santaX = -200;
        function animate() {
            ctx.clearRect(0, 0, width, height);

            // 1. ‡∏ß‡∏≤‡∏î‡∏î‡∏≤‡∏ß
            if (showStars) {
                stars.forEach(s => drawStar(s.x, s.y, s.size + Math.sin(Date.now()*0.005)*5));
            }

            // 2. ‡∏ß‡∏≤‡∏î‡∏ã‡∏≤‡∏ô‡∏ï‡πâ‡∏≤
            santaX += 1.5;
            if (santaX > width + 300) santaX = -300;
            const santaY = 80 + Math.sin(santaX/50)*20;
            ctx.font = "50px Arial";
            ctx.fillText(emojis.reindeer + emojis.reindeer + "üõ∑" + emojis.santa, santaX, santaY);

            // 3. ‡∏ß‡∏≤‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏¥‡∏°‡∏∞
            ctx.fillStyle = "white";
            ctx.beginPath();
            ctx.arc(width/2, height + 400, 500, 0, Math.PI*2);
            ctx.fill();

            // 4. ‡∏ß‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
            characters.forEach(c => {
                if (c.isJumping) {
                    c.vY += 0.8; // Gravity
                    c.y += c.vY;
                    if (c.y >= height - 80) {
                        c.y = height - 80;
                        c.isJumping = false;
                    }
                }
                ctx.font = "50px Arial";
                ctx.textAlign = "center";
                ctx.fillText(c.emoji, c.x, c.y);
            });

            // 5. ‡∏´‡∏¥‡∏°‡∏∞
            if (showSnow) {
                ctx.fillStyle = "white";
                snowflakes.forEach(p => {
                    ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
                    p.y += p.s; if (p.y > height) p.y = -10;
                });
            }

            // 6. Surprise Particles
            surpriseParticles.forEach((p, i) => {
                ctx.font = "30px Arial";
                ctx.fillText(p.char, p.x, p.y);
                p.x += p.vx; p.y += p.vy; p.vy += 0.2; p.life--;
                if (p.life <= 0) surpriseParticles.splice(i, 1);
            });

            requestAnimationFrame(animate);
        }

        // Event Listeners
        document.getElementById('toggleSnow').onclick = (e) => {
            showSnow = !showSnow;
            e.target.classList.toggle('active');
        };
        document.getElementById('toggleStars').onclick = (e) => {
            showStars = !showStars;
            e.target.classList.toggle('active');
        };
        document.getElementById('jumpAnimals').onclick = () => {
            characters.forEach(c => {
                if (!c.isJumping) {
                    c.vY = -15;
                    c.isJumping = true;
                }
            });
        };
        document.getElementById('btnSurprise').onclick = () => {
            for(let i=0; i<15; i++) {
                surpriseParticles.push({
                    x: width/2, y: height/2,
                    vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*15,
                    char: ["üéÅ","‚ù§Ô∏è","‚ú®","üç≠"][Math.floor(Math.random()*4)],
                    life: 100
                });
            }
        };

        window.addEventListener('resize', init);
        init(); animate();
    </script>
</body>
</html>

